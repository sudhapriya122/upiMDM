var dmCommonApi=angular.module("dmCommonApiModule",[]);Number.prototype.toNDigits=function(d){var b="";var f="";var e=this.toString();var c=e.length;var g=d-c;if(c<d){for(var a=0;a<g;a++){f+="0"}}b=f+e;return b};String.prototype.parseDate=function(e){var d=this;var c=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"];switch(e){case"todateobj":var b=this.split("-");var f=c.indexOf(b[1]);f=f<10?"0"+f:f;d=new Date("20"+b[2],f,b[0]);break;case"servertoobj":var a=this.split(" ")[0];var b=a.split("-");break}return d};Date.prototype.parseDate=function(d){var a=this;var i={shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortWeeks:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],weeks:["Sunday","Monday","Tuesday","Wednesday","Thrusday","Friday","Saturday"]};var b=this.getDate();var g=this.getMonth();var h=this.getFullYear();var c=this.getHours();var e=this.getMinutes();var f=this.getSeconds();switch(d?d.toLowerCase():""){case"serverdate":a=h.toNDigits(4)+"-"+(g+1).toNDigits(2)+"-"+b.toNDigits(2)+" "+c.toNDigits(2)+":"+e.toNDigits(2)+":"+f.toNDigits(2);break;case"shortdate":a=b+" "+i.shortMonths[Number(g)]+", "+h;break;case"textedmonthdate":a=b+"-"+i.shortMonths[Number(g)]+"-"+h%100;break;case"isoshortdate":a=h.toNDigits(4)+"-"+(g+1).toNDigits(2)+"-"+b.toNDigits(2);break;case"hour_min":a=c.toNDigits(2)+":"+e.toNDigits(2);break;default:break}return a};Date.prototype.dateAdd=function(a,b){b=parseInt(b);var c=0;switch(a){case"day":c=b*24;this.dateAdd("hour",c);break;case"hour":c=b*60;this.dateAdd("minute",c);break;case"week":c=b*7;this.dateAdd("day",c);break;case"minute":c=b*60;this.dateAdd("second",c);break;case"second":c=b*1000;this.dateAdd("millisecond",c);break;case"month":b=b+this.getUTCMonth();if(b/12>0){this.dateAdd("year",b/12);b=b%12}this.setUTCMonth(b);break;case"millisecond":this.setTime(this.getTime()+b);break;case"year":this.setFullYear(this.getUTCFullYear()+b);break;default:throw new Error("Invalid date increment passed");break}};Date.prototype.firstDay=function(a){switch(a.toLowerCase()){case"week":var b=this.getDay();b===0?b=7:"";this.dateAdd("day",-(b-1));break;case"month":this.setDate(1);break;case"year":this.setMonth(0);this.firstDay("month");break;default:throw new Error("Invalid parameters");break}return this};Date.prototype.lastDay=function(a){switch(a.toLowerCase()){case"week":var b=this.getDay();b===0?b=7:"";this.dateAdd("day",7-b);break;case"month":this.setDate(1);this.dateAdd("month",1);this.dateAdd("day",-1);break;case"year":this.setMonth(11);this.lastDay("month");break;default:throw new Error("Invalid parameters");break}return this};dmCommonApi.filter("columnConfigurator",[function(){return function(f){var d=[];var b=f.split("~");for(var e=0,a=b.length;e<a;e++){b[e]=b[e].trim();var c={columnId:"",columnName:"",columnType:"",columnSequence:"",columnShown:true};if(b[e].trim().toLowerCase()==="select"){c.columnId=b[e];c.columnName="Select";c.columnType="checkbox";c.columnSequence=e}else{if(b[e].trim().indexOf("_btn")>-1){c.columnId=b[e];c.columnName=b[e].split("_");c.columnName.pop();c.columnName=c.columnName.join(" ");c.columnType="button";c.columnSequence=e}else{if(b[e].trim().indexOf("_")>-1){c.columnId=b[e];c.columnName=b[e].split("_").join(" ");c.columnType="text";c.columnSequence=e}else{c.columnId=b[e];c.columnName=b[e].split("_").join(" ");c.columnType="text";c.columnSequence=e}}}d.push(c)}return d}}]);dmCommonApi.filter("extractProperty",[function(){return function(c,b){var a=[];angular.forEach(c,function(d){a.push(d[b].trim())});return a}}]);dmCommonApi.filter("replaceInArray",[function(){return function(d,b,c){var a=[];angular.forEach(d,function(e){e=e.replace(b,c);a.push(e)});return a}}]);dmCommonApi.filter("toNDigits",[function(){return function(f,d){var b="";var e="";f=f.toString();var c=f.length;var g=d-c;if(c<d){for(var a=0;a<g;a++){e+="0"}}b=e+f;return b}}]);dmCommonApi.filter("toPlatwareDate",["$filter",function(a){return function(k){if(k.trim().length>0){var d=k.split("T");var l=d[1].split(":");var b=d[0].split("-");var c=new Date(b[0],b[1],b[2],l[0],l[1]);var j=a("toNDigits")(c.getFullYear(),4);var i=a("toNDigits")(c.getMonth()+1,2);var e=a("toNDigits")(c.getDate(),2);var f=a("toNDigits")(c.getHours(),2);var g=a("toNDigits")(c.getMinutes(),2);var h=a("toNDigits")(c.getMilliseconds(),2);c=j+"-"+i+"-"+e+" "+f+":"+g+":"+h}else{c=""}return c}}]);dmCommonApi.filter("parseServerDate",[function(){return function(c){var b=null;var d=null;if(c.indexOf(".")>-1){c=c.split(".")[0]}if(c.indexOf(" ")>-1){b=c.split(" ")[0].split("-");d=c.split(" ")[1].split(":")}else{b=c.split("-");d=["00","00","00"]}var a=new Date(b[0],b[1]-1,b[2],d[0],d[1],d[2]);return a}}]);dmCommonApi.filter("formatDate",["$filter",function(a){return function(m,g){var c=null;var d=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"];var b=a("parseServerDate")(m);var k=a("toNDigits")(b.getFullYear(),4);var j=a("toNDigits")(b.getMonth()+1,2);var l=a("toNDigits")(b.getDate(),2);var e=a("toNDigits")(b.getHours(),2);var f=a("toNDigits")(b.getMinutes(),2);var h=a("toNDigits")(b.getMilliseconds(),2);var i=b.getDay();switch(g){case"dd-mm-yyyy":c=l+"-"+j+"-"+k;break;case"yyyy-mm-dd":c=k+"-"+j+"-"+l;break;case"local-date":default:c=b.toDateString()}return c}}]);dmCommonApi.filter("extractObj",[function(){return function(){}}]);dmCommonApi.filter("unique",[function(){return function(d,c){var a=[],b=[];angular.forEach(d,function(f){var e=f[c].toLowerCase();if(b.indexOf(e)===-1){b.push(e);a.push(f)}});return a}}]);dmCommonApi.filter("orderObjectBy",[function(){return function(a,c){if(!angular.isObject(a)){return a}var d=[];for(var b in a){d.push(a[b])}d.sort(function(f,e){f=parseInt(f[c]);e=parseInt(e[c]);return f-e});return d}}]);dmCommonApi.filter("byProp",[function(){return function(f,e,d,b){if(b){return f}d=d?d.toLowerCase():"";if(e=="column function name"){}var a=[],c=[];if(f&&f.length>0&&e){angular.forEach(f,function(g){g[e].toLowerCase().trim()===d.trim()?a.push(g):""})}return a}}]);dmCommonApi.filter("getEventsByTime",[function(){var a=[];return function(e,d,b,c){if(e&&e.length>0&&d){angular.forEach(e,function(f){if(f[d].split(":")[0]==b.split(":")[0]&&f[d].split(":")[0]==c.split(":")[0]&&((f[d].split(":")[1]>=b.split(":")[1])&&(f[d].split(":")[1]<=c))){a.push(f)}})}return a}}]);dmCommonApi.filter("byPropCount",[function(){return function(d,c,b){var a=0;if(Object.prototype.toString.call(d)==="[object Array]"){}else{if(Object.prototype.toString.call(d)==="[object Object]"){angular.forEach(d,function(e){if(e[c].toLowerCase().trim()===b.toLowerCase().trim()){a++}})}}return a}}]);dmCommonApi.filter("byPropMst",[function(){return function(f,e,j,a){var l=Object.prototype.toString.call(f);var m=Object.prototype.toString.call(e);var i=[];var d=null;var c=function(o){var p=Object.prototype.toString.call(o);var n=[];switch(p){case"[object String]":n.push(o.toLowerCase());break;case"[object Array]":angular.forEach(o,function(q){n.push(q.toLowerCase())});break;case"[object Object]":angular.forEach(o,function(q){n.push(q.toLowerCase())});break}return n};var h=function(o){var n={};var p=Object.prototype.toString.call(o);switch(p){case"[object String]":n[o]=c(j);break;case"[object Array]":break;case"[object Object]":angular.forEach(o,function(q,r){o[r]=c(q)});n=o;break}return n};var g=function(n){var o=Object.prototype.toString.call(n);switch(o){case"[object String]":if(n){i.push(h(n))}break;case"[object Object]":a=j;i.push(h(n));break;case"[object Array]":a=j;angular.forEach(n,function(p){i.push(h(p))});break}};var b=function(p){var o=Object.prototype.toString.call(p);var n=null;switch(o){case"[object Array]":n=[];angular.forEach(p,function(q){var r=false;angular.forEach(i,function(t){var s=0;angular.forEach(t,function(v,u){var w=q[u]?q[u].toLowerCase():q[u];if(v.indexOf(w)>-1){s++}});if(Object.keys(t).length==s){r=true}});switch(true){case a==false:if(!r){n.push(q)}break;default:if(r){n.push(q)}}});break;case"[object Object]":n={};angular.forEach(p,function(q,s){var r=false;angular.forEach(i,function(u){var t=0;angular.forEach(u,function(w,v){var x=q[v]?q[v].toLowerCase():q[v];if(w.indexOf(x)>-1){t++}});if(Object.keys(u).length==t){r=true}});switch(true){case a==false:if(!r){n[s]=q}break;default:if(r){n[s]=q}}});break}return n};var k=function(){if(f&&e){g(e);if(i.length>0){d=b(f);return}}d=f}();return d}}]);dmCommonApi.filter("excludeByProp",[function(){return function(d,c,b){var a=[];if(d&&d.length>0&&c){angular.forEach(d,function(e){e[c].toLowerCase()!==b.toLowerCase()?a.push(e):""})}return a}}]);dmCommonApi.filter("excludedData",[function(){return function(e,c,b,d){var a=[];if(e&&e.length&&c&&c.length&&b&&d){angular.forEach(e,function(g){var f=false;angular.forEach(c,function(h){if(g[b].toLowerCase()===h[d].toLowerCase()){f=true}});if(!f){a.push(g)}})}return a}}]);dmCommonApi.filter("replacePropValue",[function(){return function(e,d,b,c){var a=[];angular.forEach(e,function(f){if(f[d].toLowerCase()===b.toLowerCase()){f[d]=c}a.push(f)});return a}}]);dmCommonApi.filter("splitByDelimitor",[function(){return function(b,a){var a=a||a;return b.split(a)}}]);dmCommonApi.filter("objToLower",[function(){return function(a){angular.forEach(a,function(d,c){var b=JSON.stringify(d);var e=[];e.push(b.replace(/"([^"]+)":/g,function(g,f){var h='"'+f.toLowerCase()+'":';return h}));a.splice(c,1,JSON.parse(e))});return a}}]);dmCommonApi.filter("columnActionConfigurator",[function(){return function(d,b,c){var a=[];angular.forEach(d,function(f){if(f[b].toLowerCase().indexOf("_btn")>-1){var e=f[b].split("_");e.pop();e=e.join(" ");e.toLowerCase()===c.toLowerCase()?a.push(f):""}else{f[b].toLowerCase()===c.toLowerCase()?a.push(f):""}});return a}}]);dmCommonApi.filter("pagination",[function(){return function(f,a,e){var c=null;if(f){var d=Number(((a-1)*e));var b=Number(d+e);c=f.slice(d,b)}return c}}]);dmCommonApi.filter("highlightSearch",["$sce",function(a){return function(c,b){if(b){c=c.replace(new RegExp("("+b+")","gi"),'<span class="dmHighlighted">$1</span>')}return a.trustAsHtml(c)}}]);dmCommonApi.service("modifyObj",[function(){this.attachKey=function(c,b,a){angular.forEach(c,function(e,d){var f=a?a:d.toString();if(e[b]){e[b]=f}else{e[b]=f}});return c};this.removeKey=function(b,a){angular.forEach(b,function(c){if(c[a]){delete c[a]}});return b}}]);dmCommonApi.service("prepareDwnldData",[function(){this.uri={excel:"data:application/vnd.ms-excel;base64,",csv:"data:application/csv;base64,"};this.base64=function(a){return window.btoa(unescape(encodeURIComponent(a)))};this.characters="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";this.fromCharCode=String.fromCharCode;this.INVALID_CHARACTER_ERR=(function(){try{document.createElement("$")}catch(a){return a}}());window.btoa||(window.btoa=function(e){var o,m,n,l,j,g,h,d=0,f=e.length,k=Math.max,p="";while(d<f){o=e.charCodeAt(d++)||0;m=e.charCodeAt(d++)||0;h=e.charCodeAt(d++)||0;if(k(o,m,h)>255){throw this.INVALID_CHARACTER_ERR}n=(o>>2)&63;l=((o&3)<<4)|((m>>4)&15);j=((m&15)<<2)|((h>>6)&3);g=h&63;if(!m){j=g=64}else{if(!h){g=64}}p+=this.characters.charAt(n)+this.characters.charAt(l)+this.characters.charAt(j)+this.characters.charAt(g)}return p});this.excelData=function(f,e){var b="<table><tbody><tr>";for(var c=0;c<f.length;c++){b=b+"<th>"+f[c]["columnName"]+"</th>"}b=b+"</tr>";for(var c=0;c<e.length;c++){b=b+"<tr>";var d=e[c].invalidreason;for(var a=0;a<f.length;a++){if(f[a]["columnType"].toLowerCase()!="select"||f[a]["columnType"].toLowerCase()!="button"){if(d&&f[a]["columnId"] in d){b=b+'<td style="background:#ff0000">'+(e[c][f[a]["columnId"]].match(/^([0-9]{4}-[0-9]{1,2}-[0-9]{1,2})/g)?'"'+e[c][f[a]["columnId"]]+'"':e[c][f[a]["columnId"]])+"</td>"}else{b=b+"<td>"+(e[c][f[a]["columnId"]].match(/^([0-9]{4}-[0-9]{1,2}-[0-9]{1,2})/g)?'"'+e[c][f[a]["columnId"]]+'"':e[c][f[a]["columnId"]])+"</td>"}}}b=b+"</tr>"}b=b+"</tbody></table>";return b};this.csvData=function(g,f){var d="";for(var e=0,a=g.length;e<a;e++){if(e!==g.length-1){d=d+'"'+g[e].columnName+'",'}else{d=d+'"'+g[e].columnName+'"'}}d=d+"\n";for(var c=0;c<f.length;c++){for(var b=0;b<g.length;b++){d=d+'"'+f[c][g[b]["columnId"]]+'"';if(b!==g.length-1){d=d+","}}d=d+"\n"}return d}}]);dmCommonApi.directive("dmTable",["$parse",function(a){return{restrict:"E",templateUrl:"commonFilters/dmTable.html",scope:{datasource:"=dmDatasource",searchable:"=dmSearchable",sortable:"=dmSortable",tableDataActions:"=dmTableDataActions",columnActions:"=dmColumnActions",tabSeperatorKey:"@dmTabSeperatorKey",seperatorAsCol:"@dmTabSeperatorAsCol",dataUniqueKey:"@dmDataUniqueKey",themeColor:"@dmTheme",editableProp:"@dmEditableKey",editableCondn:"@dmEditableCondition",returnCurrentData:"=returnDataAction",refreshTableCtrl:"=dmTableRefresh",cellTitle:"@dmCellTitle",dmCellAction:"@dmCellAction",dmActionCellTitle:"@dmActionCellTitle",dmColListConfig:"=dmColConfig",tablePaginationProc:"=dmProcedure",dmServerPagin:"=dmServerPaging"},controller:function(b,g,h,e){b.$on("switchTab",function(k,j){b.showTab(j)});var d=8;var i=8;if(b.tabSeperatorKey){if(b.tabSeperatorKey.indexOf("_")>-1){b.tabSep=b.tabSeperatorKey.split("_").join(" ")}else{b.tabSep=b.tabSeperatorKey}}b.columnObj={columnListShown:false,disabledColumn:[],isColumnList:false};b.getPrevRecords=function(){var j=parseInt(b.startIndex);j=j-parseInt(b.dmServerPagin.batchCount)-1;b.tablePaginationProc(j)()};b.getNextRecords=function(){var j=b.endIndex;b.tablePaginationProc(j)()};var f=function(){if(b.dmColListConfig&&b.dmColListConfig.columnListShown){b.columnObj.isColumnList=true;var j=Object.prototype.toString.call(b.dmColListConfig);if(j==="[object Object]"){if(b.dmColListConfig.disabled&&b.dmColListConfig.disabled.length>0){b.columnObj.disabledColumn=b.dmColListConfig.disabled}}}else{b.columnObj.isColumnList=false}};b.selectedRows={};b.itemsPerPage={itemShown:d};b.itemCountPerPage={startCount:1,endCount:i};b.pageNumber={currentPage:1};b.pageNumber.currentPage=1;b.totalPages="";b.datacount="";b.searchTableData={value:""};b.columns=null;b.shownTableData=null;b.tableTabs=null;b.dataUniqueKey=null;b.tabShown={currentTab:null};b.showTabTable=function(k){var j=false;if(b.tabShown.currentTab.toLowerCase()==k.toLowerCase()){j=true}return j};b.totalPagesCalculator=function(){b.totalPages=Math.ceil(b.datacount/b.itemsPerPage.itemShown)||0};b.setDataSource=function(){if(b.datasource&&b.datasource.length>0){if(!b.dataUniqueKey){b.dataUniqueKey="dmdataindex";b.datasource=h.attachKey(b.datasource,b.dataUniqueKey)}b.dataUniqueKey=b.dataUniqueKey.toLowerCase();b.tableTabs=b.calculateTableTabs();angular.forEach(b.datasource,function(l,k){var j=JSON.stringify(l);var m=[];m.push(j.replace(/"([^"]+)":/g,function(o,n){var p='"'+n.toLowerCase()+'":';return p}));b.datasource.splice(k,1,JSON.parse(m))});b.columns=g("columnConfigurator")(b.datasource[0].heading.toLowerCase());if(b.tabSeperatorKey){b.perTabData()}else{b.dataWithoutTab()}b.calculatePerPageData()}};b.$watch("datasource",function(){b.showEditableRow={};b.startIndex=b.datasource[0].start_index;b.endIndex=b.datasource[0].end_index;b.reset();b.setDataSource();f()});b.calculateTableTabs=function(){var j=null;var k=null;if(b.tabSeperatorKey){k=new Array();j=g("unique")(b.datasource,b.tabSeperatorKey);angular.forEach(j,function(l){if(l[b.tabSeperatorKey]&&l[b.tabSeperatorKey].trim().length>0){k.push(l[b.tabSeperatorKey]);if(!b.selectedRows[l[b.tabSeperatorKey]]){b.selectedRows[l[b.tabSeperatorKey]]={}}}});b.tabShown.currentTab=k[0]}return k};b.showTab=function(j){b.showEditableRow={};b.tabShown.currentTab=j;b.perTabData();b.calculatePerPageData()};b.dataWithoutTab=function(){b.pageNumber.currentPage=1;b.itemsPerPage.itemShown=d;b.itemCountPerPage.startCount=1;b.particularTabData=b.datasource||[];b.particularTabData=g("filter")(b.particularTabData,b.searchTableData.value);b.datacount=b.particularTabData.length;b.particularTabData=b.particularTabData||[];b.datacount=b.particularTabData.length;if(b.datacount<b.itemsPerPage.itemShown){b.itemsPerPage.itemShown=b.datacount;b.itemCountPerPage.endCount=b.datacount}else{b.itemsPerPage.itemShown=d;b.itemCountPerPage.endCount=i}b.totalPages=Math.ceil(b.datacount/b.itemsPerPage.itemShown)||0};b.perTabData=function(){b.pageNumber.currentPage=1;b.itemsPerPage.itemShown=d;b.itemCountPerPage.startCount=1;b.particularTabData=g("byProp")(b.datasource,b.tabSeperatorKey,b.tabShown.currentTab);b.particularTabData=g("filter")(b.particularTabData,b.searchTableData.value);b.particularTabData=b.particularTabData||[];b.datacount=b.particularTabData.length;if(b.datacount<b.itemsPerPage.itemShown){b.itemsPerPage.itemShown=b.datacount;b.itemCountPerPage.endCount=b.datacount}else{b.itemsPerPage.itemShown=d;b.itemCountPerPage.endCount=i}b.columns=g("columnConfigurator")(b.particularTabData[0].heading.toLowerCase());b.totalPages=Math.ceil(b.datacount/b.itemsPerPage.itemShown)||0};b.calculatePerPageData=function(){b.sortingObj={sortingColumn:"",sortingType:null};b.shownTableData=g("pagination")(b.particularTabData,b.pageNumber.currentPage,b.itemsPerPage.itemShown)};b.perPageItemShown=function(){b.pageNumber.currentPage=1;if(b.itemsPerPage.itemShown>b.particularTabData.length){b.itemsPerPage.itemShown=b.particularTabData.length;b.itemCountPerPage.endCount=b.particularTabData.length}b.calculatePerPageData();b.totalPagesCalculator()};b.$watch(function(){return b.searchTableData.value},function(){if(b.tabSeperatorKey){b.perTabData()}else{b.dataWithoutTab()}b.perPageItemShown()});var c=function(k,m){var l=k;var j=b.datasource;j.sort(function(o,n){var p=0;switch(angular.isArray(o[l])){case true:if(o[l].length>n[l].length){p=m?1:-1}else{if(o[l].length<n[l].length){p=m?-1:1}}break;case false:if(o[l].toLowerCase()>n[l].toLowerCase()){p=m?1:-1}else{if(o[l].toLowerCase()<n[l].toLowerCase()){p=m?-1:1}}break}return p});if(b.tabSeperatorKey){b.perTabData()}else{b.dataWithoutTab()}b.calculatePerPageData()};b.setSort=function(j,k){c(j,k)};b.tableActionClick=function(k){var j=b.prepareReturnedData().slice();b.$parent[k](j)};b.returnDataClick=function(l){if(typeof(b.datasource)=="object"){var k=b.datasource[0];if(k.heading.split("~")[0].toLowerCase()=="select"){var j=b.prepareReturnedData().slice();b.$parent[l](j)}else{b.$parent[l](b.datasource)}}else{b.$parent[l](b.datasource)}};b.columnActionClick=function(l,k){b.columnActions=g("objToLower")(b.columnActions);var j=g("columnActionConfigurator")(b.columnActions,"column_name",l);b.$parent[j[0]["action_function"]](k)};b.changePage=function(j){if(j>0&&j<=b.totalPages){b.pageNumber.currentPage=j;var l=Number(((j-1)*b.itemsPerPage.itemShown));var k=Number(l+b.itemsPerPage.itemShown);b.itemCountPerPage.startCount=(l+1);if(k>b.particularTabData.length){b.itemCountPerPage.endCount=b.particularTabData.length}else{b.itemCountPerPage.endCount=k}b.calculatePerPageData()}else{if(j<=0){b.pageNumber.currentPage=1;b.calculatePerPageData()}else{if(j>b.totalPages){b.pageNumber.currentPage=b.totalPages;b.calculatePerPageData()}}}};b.prepareReturnedData=function(){var j=[];switch(true){case b.tabSeperatorKey?true:false:angular.forEach(b.selectedRows,function(k){angular.forEach(k,function(l,m){angular.forEach(l,function(o,n){if(o){j.push(g("byProp")(b.datasource,b.dataUniqueKey,n)[0])}})})});break;default:angular.forEach(b.selectedRows,function(k,l){angular.forEach(k,function(n,m){if(n){j.push(g("byProp")(b.datasource,b.dataUniqueKey,m)[0])}})});break}return j};b.getBrightness=function(k){var m=parseInt(k.substr(0,2),16);var l=parseInt(k.substr(2,2),16);var j=parseInt(k.substr(4,2),16);var n=((m*299)+(l*587)+(j*114))/1000;return(n>=128)?"black":"white"};b.downLoadTableData=function(l,o){var m=g("byProp")(b.columns,"columnType","text");if(b.tabSeperatorKey){var n=g("byProp")(b.datasource,b.tabSeperatorKey,b.tabShown.currentTab)}else{var n=b.datasource}switch(o){case"excel":var k=e.excelData(m,n);if(navigator.msSaveBlob){return navigator.msSaveBlob(new Blob([k]),"data.xls")}else{l.target.download="data.xls";var j=e.uri.excel+e.base64(k);l.target.href=j}break;case"csv":var k=e.csvData(m,n);if(navigator.msSaveBlob){return navigator.msSaveBlob(new Blob([k]),"data.xls")}else{l.target.download="data.xls";var j=e.uri.excel+e.base64(k);l.target.href=j}break;case"pdf":break;default:}};b.editRow=function(j,k,m){var l;b.showEditableRow[m]?l=false:l=true;if(b.isDataEditable){if(b.editableProp=="all"){b.showEditableRow[m]=l;angular.forEach(j.currentTarget.children,function(n){if(n.attributes.style){if(n.attributes.style.value!=""){n.focus();return}}})}else{if(k.toLowerCase()==b.editableCondn){b.showEditableRow[m]=l;angular.forEach(j.currentTarget.children,function(n){if(n.attributes.style){if(n.attributes.style.value!=""){n.focus();return}}})}}}};b.initEditableFlag=function(j){b.showEditableRow[j]=false};b.showUnEditableField=function(k,j){var m=false;try{if(b.editableCondn.toLowerCase()===k){if(b.showEditableRow[j]===false||!b.showEditableRow[j]){m=true}}else{m=true}}catch(l){m=true}return m};b.showEditableField=function(k,j){var l=false;if(b.isDataEditable){if(b.editableCondn.toLowerCase()===k){if(b.showEditableRow[j]===true){l=true}}else{}}return l};b.isActionVisible=function(m){var k=false;if(!m){k=true}else{for(var l=0,j=m.length;l<j;l++){if(b.tabShown.currentTab.toLowerCase()===m[l].toLowerCase()){k=true}}}return k};b.isAllRowSelected={};b.chkForAllSelected=function(){var k=true;switch(true){case b.tabSeperatorKey?true:false:var j=Object.keys(b.selectedRows[b.tabShown.currentTab][b.pageNumber.currentPage]).length;if(j===b.shownTableData.length){angular.forEach(b.selectedRows[b.tabShown.currentTab][b.pageNumber.currentPage],function(l){if(!l){k=false}})}else{k=false}b.isAllRowSelected[b.tabShown.currentTab][b.pageNumber.currentPage]=k;break;default:var j=Object.keys(b.selectedRows[b.pageNumber.currentPage]).length;if(j===b.shownTableData.length){angular.forEach(b.selectedRows[b.pageNumber.currentPage],function(l){if(!l){k=false}})}else{k=false}b.isAllRowSelected[b.pageNumber.currentPage]=k}};b.selectAll=function(){switch(true){case b.tabSeperatorKey?true:false:angular.forEach(b.shownTableData,function(j){b.selectedRows[b.tabShown.currentTab][b.pageNumber.currentPage]=b.selectedRows[b.tabShown.currentTab][b.pageNumber.currentPage]||{};b.selectedRows[b.tabShown.currentTab][b.pageNumber.currentPage][j[b.dataUniqueKey]]=b.isAllRowSelected[b.tabShown.currentTab][b.pageNumber.currentPage]});break;default:angular.forEach(b.shownTableData,function(j){b.selectedRows[b.pageNumber.currentPage]=b.selectedRows[b.pageNumber.currentPage]||{};b.selectedRows[b.pageNumber.currentPage][j[b.dataUniqueKey]]=b.isAllRowSelected[b.pageNumber.currentPage]});break}};b.refreshTable=function(j){b.$parent[j](b.datasource)};b.reset=function(){b.tabShown={currentTab:null};b.itemCountPerPage={startCount:1,endCount:i};b.searchTableData={value:""};b.selectedRows={};b.dataUniqueKey=null;b.isAllRowSelected={}};b.isPageNumberEditable=false;b.chkForPageNumberEdit=function(){if(b.isPageNumberEditable){b.isPageNumberEditable=false}else{b.isPageNumberEditable=true}};b.isTableActionVisible=function(j){var m=false;var l=b.columns;var k=j.visibility;if(k){switch(k.toLowerCase()){case"cb":angular.forEach(l,function(n){if(n.columnType=="checkbox"){m=true}});break;default:}}else{m=true}return m};b.toggleColumnList=function(){b.columnObj.columnListShown=b.columnObj.columnListShown?false:true}},link:function(f,e,d){f.isDataEditable=false;var c=[];if(f.dmActionCellTitle){c=f.dmActionCellTitle.split("~")}f.showEditableRow={};if(f.editableProp){if(f.editableProp.toLowerCase()==="all"||f.editableCondn){f.isDataEditable=true}else{}}var b=a(f.dmCellAction);f.tableCellAction=b(e.scope());f.isTextUnderLine=function(g,i){var h=false;if(f.dmCellAction){if(c.length==0){h=true;if(!isNaN(i)){if(Number(i)>0){h=true}else{h=false}}else{h=false}}else{if(c.indexOf(g)>-1){h=true}}}return h}}}}]);dmCommonApi.directive("dmScrollableList",[function(){return{restrict:"E",templateUrl:"commonFilters/dmScrollableList.html",scope:{listsArray:"=dmLists"},controller:function(a){},link:function(c,b,a){c.$watch(c.listsArray,function(){c.setInitialData()});c.setInitialData=function(){};c.Timer=null;c.clear=function(){clearInterval(c.Timer)};c.onLeftScroll=function(){var e=b[0].children[1].children[1];var d=e.children[0];var f=d.children[0].offsetWidth;e.scrollLeft=e.scrollLeft-f};c.onRightScroll=function(){var e=b[0].children[1].children[1];var d=e.children[0];var f=d.children[0].offsetWidth;e.scrollLeft=e.scrollLeft+f};c.dmListClick=function(d){c.$parent[d]()};c.isListAvailable=function(e){var d=false;if(e&&e.length>0){d=true}return d}}}}]);dmCommonApi.service("dmDialogueBox",["$q","$timeout",function(b,c){var a=this;a.dialogueCtrls={};a.initialize=function(){a.dialogueCtrls={title:"",message:"",actionLabel:[],isShown:false,messageType:"",type:""};a.deferObj=null};a.deferObj=null;a.timerForToast=null;a.alertBox=function(e){a.deferObj=b.defer();var d="alert";var i=e.title?e.title:"Alert Box";var h=e.message;var g=e.messageType?e.messageType:"general";var f=(e.actionlabel&&e.actionlabel.length>0)?e.actionlabel:["Ok"];a.setControls(i,h,f,d,g);return a.deferObj.promise};a.setReturn=function(d){a.deferObj.resolve(d)};a.confirmBox=function(e){a.deferObj=b.defer();var d="confirm";var i=e.title?e.title:"Confirm Box";var h=e.message;var g=e.messageType?e.messageType:"general";var f=(e.actionlabel&&e.actionlabel.length)>0?e.actionlabel:["Cancel","Ok"];a.setControls(i,h,f,d,g);return a.deferObj.promise};a.toastBox=function(e){a.deferObj=b.defer();var d="toast";var i=e.title?e.title:"Toast Box";var h=e.message;var g=e.messageType?e.messageType.toLowerCase():"general";var f=(e.actionlabel&&e.actionlabel.length)>0?e.actionlabel:["Cancel","Ok"];a.setControls(i,h,f,d,g);a.persistToastBox();a.reinitializeToastBox();return a.deferObj.promise};a.reinitializeToastBox=function(){a.timerForToast=c(function(){a.deferObj.resolve(true);a.hideDialogue()},3000)};a.persistToastBox=function(){c.cancel(a.timerForToast)};a.hideToastBox=function(){c.cancel(a.timerForToast);a.setReturn(true);a.hideDialogue()};a.setControls=function(h,g,f,d,e){a.dialogueCtrls.title=h;a.dialogueCtrls.message=g;a.dialogueCtrls.actionLabel=f;a.dialogueCtrls.isShown=true;a.dialogueCtrls.type=d;a.dialogueCtrls.messageType=e.toLowerCase()};a.getControls=function(){return a.dialogueCtrls};a.hideDialogue=function(){a.initialize()};a.initialize()}]);dmCommonApi.directive("dmDialogue",[function(){return{restrict:"E",templateUrl:"commonFilters/dmDialogues.html",scope:{themeColor:"@dmTheme"},controller:function(b,c,a){b.dmDialogueBox=c;b.dialogueCtrls=null;b.actionItemHover=new Object();b.$watch(function(){return c.getControls()},function(f){b.dialogueCtrls=f;try{b.dialogueCtrls.message=a.trustAsHtml(b.dialogueCtrls.message)}catch(d){}b.actionWidth=(100/b.dialogueCtrls.actionLabel.length)+"%"},true);b.dialogueColor={error:{color:"#a94442",background:"#ebccd1","border-color":"#f2dede"},success:{color:"#3c763d",background:"#dff0d8","border-color":"#d6e9c6"},warning:{color:"#8a6d3b",background:"#fcf8e3","border-color":"#faebcc"},general:{}};b.reInitializeToast=function(){b.dmDialogueBox.reinitializeToastBox()};b.persistToast=function(){b.dmDialogueBox.persistToastBox()};b.actionClick=function(d){switch(b.dialogueCtrls.type.toLowerCase()){case"alert":switch(true){case d==0:c.setReturn(true);break;default:c.setReturn(true);break}break;case"confirm":switch(true){case d==0:c.setReturn(false);break;case d==1:c.setReturn(true);break;default:c.setReturn(false);break}break;case"toast":switch(true){default:c.hideToastBox()}}b.dmDialogueBox.hideDialogue()}},link:function(c,b,a){}}}]);dmCommonApi.directive("searchlist",["$filter","$parse",function(b,a){return{restrict:"E",require:"?ngModel",scope:{itemaction:"&",buttonaction:"&",themecolor:"@",textboxStyle:"@"},templateUrl:"commonFilters/searchList.html",link:function(e,d,c,f){e.isDisabled=false;e.windowHeight=window.innerHeight;e.bodyRect=document.body.getBoundingClientRect();e.isListInverse=false;e.returnValueType=c.modeltype;e.$watch(function(){return c.itemlist},function(g){if(c.hasOwnProperty("dmDisabled")&&c.dmDisabled!=""){e.isDisabled=JSON.parse(c.dmDisabled)}if(g&&(g=JSON.parse(g))&&g.length>0){e.itemlist=g}else{e.itemlist=null;f.$setViewValue("")}});e.$watch(function(){return f.$viewValue},function(j){if(j){var h=Object.prototype.toString.call(j);if(h=="[object Object]"){e.searchListInputModel=j[e.itemDescription]}else{var g=b("byProp")(e.itemlist,e.itemValue,j);try{e.searchListInputModel=g[0][e.itemDescription]}catch(i){}}}else{if(!e.itemlist||e.itemlist.length<=0){e.searchListInputModel=""}e.searchListInputModel=""}});e.$watch("isListOpen",function(){e.elementRect=d[0].getBoundingClientRect();e.offset=e.elementRect.top-e.bodyRect.top;var i=window.getComputedStyle(d[0].children[2].children[1]);var h=Number(i.maxHeight.replace("px",""));var g=h+e.offset;if(e.windowHeight<g){e.isListInverse=true}else{e.isListInverse=false}e.textBoxWidth=d[0].children[2].children[0].offsetWidth+"px"});e.selectedItem=null;e.placeholder=c.placeholder;e.itemValue=c.itemvalue;e.itemDescription=c.itemdesc;e.title=c.label;if(c.actiontitle&&c.actiontitle.length>0){e.buttonTitle=c.actiontitle;e.isButton=true}else{e.isButton=false}e.isListOpen=true;e.showList=function(){};e.hideList=function(){};e.itemClick=function(g){e.setViewValue(g)};e.buttonClick=function(){if(e.buttonaction){e.buttonaction()()}};e.callOnChange=function(){var g="";angular.forEach(e.itemlist,function(h){if(h[e.itemDescription].toLowerCase()===e.searchListInputModel.toLowerCase()){g=h}});e.setViewValue(g)};e.setViewValue=function(g){if(e.returnValueType&&e.returnValueType.toLowerCase()=="value"){if(!g&&e.searchListInputModel&&e.searchListInputModel.length>0){f.$setViewValue("")}else{f.$setViewValue(g[e.itemValue]);e.searchListInputModel=g[e.itemDescription]}}else{if(!g&&e.searchListInputModel&&e.searchListInputModel.length>0){f.$setViewValue(g)}else{f.$setViewValue(g)}}};e.$watch("selectedItem",function(){e.callOnChange()})},controller:["$scope","$filter",function(c,e,d){c.searchlistItemHover={};c.stylefn=function(){var f=c.$eval(c.textboxStyle);return f};c.getInputBoxWidth=function(f){var g={width:""}};c.setHover=function(f){c.searchlistItemHover[f]=true};c.unsetHover=function(f){c.searchlistItemHover[f]=false};c.getHoverStyle=function(f){var g=new Object();c.searchlistItemHover[f]?g={background:"#"+c.themecolor,color:"#ffffff"}:g={background:"#ffffff",color:"#"+c.themecolor};return g}}]}}]);dmCommonApi.directive("dmFocus",["$timeout","$parse",function(a,b){return{link:function(f,e,d){var c=b(d.dmFocus);f.$watch(c,function(g){if(g===true){a(function(){e[0].focus()})}})}}}]);dmCommonApi.directive("dmTimePicker",["$filter",function(a){return{restrict:"E",require:"?ngModel",scope:{themecolor:"@",textboxStyle:"@"},templateUrl:"commonFilters/dmTimePicker.html?"+new Date(),link:function(m,f,l,c){m.stylefn=function(){var i=m.$eval(m.textboxStyle);return i};m.setTime=function(){m.timePickerModel=a("toNDigits")(m.hourPickerModel,2)+":"+a("toNDigits")(m.minutesPickerModel,2);c.$setViewValue(m.timePickerModel);c.$setDirty()};m.windowHeight=window.innerHeight;m.isPickerInverse=false;m.isPickingTime=null;m.timePickerModel;if(c.$viewValue){}m.$watch(function(){return c.$viewValue},function(i){if(i&&i.match(/^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$/gi)){i=i.split(":");m.hourPickerModel=i[0];m.minutesPickerModel=i[1]}else{m.hourPickerModel=0;m.minutesPickerModel=0}m.setTime()});m.hourPickerModel=0;m.minutesPickerModel=0;c.$setViewValue(m.timePickerModel);m.isPickerOpen=false;m.isPickingHour=null;m.isPickingMinutes=null;var d=f[0].childNodes[5];m.onTimepickerFocus=function(){if(m.isPickingTime===null){m.isPickingTime=true}m.offset=f[0].offsetTop;var o=window.getComputedStyle(d);var i=Number(o.height.replace("px",""));var n=i+m.offset;if(m.windowHeight<n){m.isPickerInverse=true}else{m.isPickerInverse=false}m.isPickerOpen=true};m.onTimepickerBlur=function(){if(m.isPickingTime){}else{m.isPickerOpen=false}};m.onMouseLeave=function(){if(m.isPickingTime!==null){m.isPickingTime=false;m.$apply()}};m.onMouseEnter=function(){if(m.isPickingTime!==null){m.isPickingTime=true}};d.addEventListener("mouseenter",m.onMouseEnter);d.addEventListener("mouseleave",m.onMouseLeave);m.timeHrData=[];for(var g=0;g<24;g++){var h=a("toNDigits")(g,2);var j={id:h,value:h};m.timeHrData.push(j)}m.timeMinData=[];var k;var e;for(var g=0;g<60;g++){if(g%5==0){k=a("toNDigits")(g,2)}else{k="."}e=a("toNDigits")(g,2);var b={id:e,value:k};m.timeMinData.push(b)}},controller:["$scope","$filter",function(b,d,c){}]}}]);dmCommonApi.directive("fileModel",["$parse",function(a){return{restrict:"A",link:function(f,e,d){var c=a(d.fileModel);var b=c.assign;e.bind("change",function(){f.$apply(function(){b(f,e[0].files[0])})})}}}]);dmCommonApi.factory("formValidityPrvdr",["$filter",function(c){var a={};var b;return{chkForFormValid:function(e){var f="";b=e;var d={isInvalid:false,errorMessages:"",inputCtrls:{}};angular.forEach(e,function(g){var h=Object.prototype.toString.call(g);if(h=="[object Object]"){if(g.hasOwnProperty("$modelValue")){d.inputCtrls[g["$name"]]={isInvalid:false,errorMessage:""};if(g["$error"]["isError"]&&g["$error"]["isVisible"]){if(g["$untouched"]&&g["$modelValue"]){d.inputCtrls[g["$name"]]["isInvalid"]=true}else{if(g["$untouched"]){d.inputCtrls[g["$name"]]["isInvalid"]=false}else{d.inputCtrls[g["$name"]]["isInvalid"]=true}}d.inputCtrls[g["$name"]]["errorMessage"]=g["$error"]["errorMessage"];d.isInvalid=true;d.errorMessages=d.errorMessages+g["$error"]["errorMessage"]+"\n"}}}});return d},addCtrlsToForm:function(d,e){a[d]=a[d]||{};var f=e.$name;a[d][f]=e},setFormError:function(e){var f=b.$error.required;var g;if(f){for(var d=0;d<f.length;d++){if(f[d]["$name"]==e){if(f[d]){g=f[d];g["$error"]["errorMessage"]="";g["$error"]["isError"]=false}}}}}}}]);dmCommonApi.directive("validate",["formValidityPrvdr","$parse","$filter","$rootScope",function(d,b,c,a){return{restrict:"A",require:"ngModel",link:function(J,o,l,y){var p=y.$$parentForm.$name;var u=y.$name;d.addCtrlsToForm(p,y);var e=b(l.validate);var C=b(l.formvalues)(o.scope());var i=e(J);var A=i.form_id;var t=i.param_name;var m=i.data_type.toLowerCase();var B=i.textbox_type.toLowerCase()||m;var j=Number(i.max_length)||"";var M=Number(i.min_length)||"";var F=i.mandatory||"";var n=i.max_value||"";var g=i.min_value||"";F=F.toLowerCase()=="y"?true:false;var h="";var k="";var K=false;var G=function(){switch(m){case"text":switch(B){case"alpha":h=/^[a-zA-Z\s]*$/gi;break;case"number":case"n":case"phone":h=/^[0-9]*$/gi;break;case"name":h=/^[A-Za-z\.]*$/gi;break;case"alphanum":break;case"mobile":h=/^[6-9]{1}[0-9]*$/;break;case"loc_code":h=/^[6-9]{1}[0-9]*$/;break;case"email":h=/^[\w\-\.\+]+\@[a-zA-Z0-9\.\-]+\.[a-zA-z0-9]{2,4}$/gi;K=true;break;default:}break;case"ta":case"textarea":switch(B){case"ta":case"textarea":h=/^[A-Za-z0-9\s\.\-\/,@#]*$/gi;break;default:}break;case"radio":case"rb":switch(B){case"radio":case"rb":break;default:}break;case"checkbox":case"cb":switch(B){case"checkbox":case"cb":break;default:}break;case"tcb":switch(B){case"tcb":break;default:}break;case"select":switch(B){case"select":break;default:}break;default:}}();y.$error={isError:null,errorMessage:null,isWarning:null,warningMessage:null};var L=b(l.ngRequired);J.$watch(function(){return L(J)},function(Q){y.$error.isVisible=Q});var D=function(Q){y.$setViewValue(Q);y.$render()};var f=function(Q,R){y.$error.isWarning=Q;y.$error.warningMessage=R?R:""};var v=function(Q,R){y.$error.isError=Q;y.$error.errorMessage=R?R:""};var x=function(Q){};var I=function(R,V,Z,U){V=c("parseServerDate")(V);var W={message:"",isValid:false};var ab=new RegExp(["<=","<",">=",">","="].join("|"));var X=/\+|\-/;var T=Z.match(/\d+/);var Q=new Date();var aa="";if(Z.match(ab)){}else{if(Z){var S=1;var Y=Z.match(X)?Z.match(X)[0]:null;if(T&&T.length>0){Z=Z.split(T[0]).join("");S=Number(T[0])}S=Number(Y+S);switch(Z.split("-")[0].toUpperCase()){case"T":Q=new Date();break;case"FM":Q.firstDay("month");break;case"LM":Q.lastDay("month");break;case"FY":Q.firstDay("year");break;case"LY":Q.lastDay("year");break;case"FCW":Q.firstDay("week");break;case"LCW":Q.lastDay("week");break;case"WS":break;case"WE":break;default:}switch(Z.split("-")[1]?Z.split("-")[1].toLowerCase():""){case"d":Q.dateAdd("day",S);break;case"m":Q.dateAdd("month",S);break;case"y":Q.dateAdd("year",S);break;case"w":Q.dateAdd("week",S);break;default:}switch(U){case"date":Q.setHours(0,0,0,0,0);V.setHours(0,0,0,0,0);W.message=Q.parseDate("shortdate");break;case"datetime":W.message=Q.parseDate("shortdate")+" "+Q.parseDate("hour_min");break;default:}switch(R){case"min":if(V.getTime()>=Q.getTime()){W.isValid=true}break;case"max":if(V.getTime()<=Q.getTime()){W.isValid=true}break}return W}}};var q=function(S,Q,V){var T=true;var U="";switch(S){case"text":switch(Q){case"alpha":case"number":default:if(!V){U=t+" can not be empty";T=false}break}break;case"select":switch(Q){case"select":default:if(!V){U=t+" can not be empty";T=false}break}break;case"cb":case"checkbox":case"tcb":switch(Q){case"cb":case"checkbox":case"tcb":default:var X=Object.prototype.toString.call(V);var W=false;var R=["no","n"];if(X=="[object Object]"){angular.forEach(V,function(Y){if(R.indexOf(Y.toLowerCase())<0){W=true}});if(!W){U=t+" should be selected for atleast one";T=false}}break}break;case"rb":case"radio":switch(Q){case"rb":case"radio":default:if(!V){U=t+" must be selected";T=false}}break;case"datetime":switch(Q){case"datetime":var X=Object.prototype.toString.call(V);if(X=="[object Object]"){if(!V.date||!V.time){U=t+" must be selected";T=false}}break}default:if(!V){U=t+" can not be empty";T=false}}if(U){v(true,U)}else{v(false)}return T};var z=function(ab,ac,T,R,ad,Y){var S=true;var Z="";var W=Object.prototype.toString.call(T);var aa="";switch(W){case"[object Object]":break;case"[object String]":aa=T.trim().length;break;default:aa=T.trim().length}if(ad&&(Y||(!Y&&aa>0))){switch(ab){case"text":switch(ac){case"alpha":break;case"number":T=Number(T);ad=Number(ad);if(T<ad){Z=t+" should not be less than "+ad;S=false}break;default:}break;case"date":switch(ac){case"date":var Q=I("min",T,ad,ac);if(!Q.isValid){Z=t+" should not be less than "+Q.message;S=false}break;case"datetime":break}break;case"datetime":switch(ac){case"datetime":var W=Object.prototype.toString.call(T);switch(W){case"[object Object]":var V=T.date;var ae=T.time.split(":");var U=ae.join(":");for(var X=0;X<3-ae.length;X++){U=U+":00"}T=V+" "+U;break;default:}var Q=I("min",T,ad,ac);if(!Q.isValid){Z=t+" should not be less than "+Q.message;S=false}break}default:}}if(Z){v(true,Z)}else{v(false)}return S};var H=function(aa,ab,T,R,ac){var S=true;var Y="";var W=Object.prototype.toString.call(T);var Z="";switch(W){case"[object Object]":break;case"[object String]":Z=T.trim().length;break;default:Z=T.trim().length}if(ac&&(F||(!F&&Z>0))){switch(aa){case"text":switch(ab){case"alpha":break;case"number":T=Number(T);ac=Number(ac);if(T>ac){Y=t+" should not be greater than "+ac;S=false}break;default:}break;case"date":switch(ab){case"date":var Q=I("max",T,ac,ab);if(!Q.isValid){Y=t+" should not be greater than "+Q.message;S=false}break;case"datetime":break}break;case"datetime":switch(ab){case"datetime":var W=Object.prototype.toString.call(T);switch(W){case"[object Object]":var V=T.date;var ad=T.time.split(":");var U=ad.join(":");for(var X=0;X<3-ad.length;X++){U=U+":00"}T=V+" "+U;break;default:}var Q=I("max",T,ac,ab);if(!Q.isValid){Y=t+" should not be greater than "+Q.message;S=false}break}default:}}if(Y){v(true,Y)}else{v(false)}return S};var w=function(Y,Z,T,Q,S,V){var R=true;var W="";var U=Object.prototype.toString.call(T);var X="";switch(U){case"[object Object]":break;case"[object String]":X=T.trim().length;break;default:X=T.trim().length}if(S&&(V||(!V&&X>0))){switch(Y){case"text":switch(Z){case"alpha":case"number":case"name":case"mobile":case"loc_code":case"alphanum":case"ta":case"textarea":default:if(X&&X<S){W=t+" length should not be less than "+S;R=false}break}break;default:}}if(W){v(true,W)}else{v(false)}return R};var N=function(Y,Z,S,Q,T,V){var R=true;var W="";var X="";var U=Object.prototype.toString.call(S);switch(U){case"[object Object]":break;case"[object String]":X=S.trim().length;break;default:X=S.trim().length}if(T&&(V||(!V&&X>0))){switch(Y){case"text":switch(Z){case"alpha":case"number":case"name":case"alphanum":case"mobile":case"loc_code":case"ta":case"textarea":default:if(X>T){W=t+" length should be less than or equal to "+T;D(Q);R=false}break}break;default:}}if(W){v(true,W)}else{v(false)}return R};var O=function(U,Q,T,S){var R=true;if(h){switch(m){case"text":switch(B){case"email":if(S&&U&&!U.match(h)){R=false;v(true,t+" should be a valid email Id")}break;case"alpha":case"alphanum":case"number":case"n":case"phone":case"mobile":case"loc_code":case"name":if(U&&!U.match(h)){D(Q);R=false}break;default:}break;default:}}return R};var r=function(V,R,T,S){R=R||"";V=V||"";if(O(V,R,T,S)){var U=i.parent_form_action.split("||");var Q=U.indexOf("optional");if(Q>-1){if(i.parent_control_id.split("||").length>1){if(C[A][i.parent_json_name.split("||")[Q]]==undefined||C[A][i.parent_json_name.split("||")[Q]]==""){if(!C[A][i.json_name]||C[A][i.json_name]==undefined){if(F&&!q(m,B,V,R)){return}}}}d.setFormError(i.parent_json_name.split("||")[Q])}else{if(F&&!q(m,B,V,R)){return}}if(!N(m,B,V,R,j,F)){return}if(!w(m,B,V,R,M,F)){return}if(!z(m,B,V,R,g,F)){return}if(!H(m,B,V,R,n,F)){return}}};J.$watch(function(){return y.$modelValue},r,true);var E=function(){};var s=function(){var Q=y.$modelValue;K=true;r(Q,Q,J,true);J.$apply()};var P=function(Q){};o.on("keypress",P);o.on("blur",s)}}}]);dmCommonApi.directive("dmSearchList",["$parse","$http","$compile","$filter","$rootScope",function(c,e,b,d,a){return{restrict:"A",require:"?ngModel",transclude:true,scope:{},link:function(p,g,n,o){e.get("commonFilters/searchlistTemplate.html").success(function(r){angular.element(document.querySelectorAll("[ng-view]")[0]).append(b(r)(p))});try{var f=n.styleobj?JSON.parse(n.styleobj.replace(/\'/g,'"')):{}}catch(j){console.log("Searchlist : Style Object Is not a valid object")}var l=c(n.dmSearchList);var k=n.itemvalue;p.itemvalue=n.itemvalue;var q=n.modaltype?n.modaltype:"object";p.themeColor=n.theme;p.itemdesc=n.itemdesc;p.itemList=l(g.scope());var h=p.itemList;var i=function(s){var r="";s=s||"";angular.forEach(h,function(t){switch(q){case"object":if(t[k].toLowerCase()==s[k].toLowerCase()){r=t[p.itemdesc]}break;case"value":if(t[k].toLowerCase()==s.toLowerCase()){r=t[p.itemdesc]}break}});return r};var m=function(){h=l(g.scope());p.itemList=h;var r=i(o.$modelValue);o.$setViewValue(r);o.$render();if(!r){g[0].value=""}};p.$watch(function(){return l(g.scope())},function(s){h=s;p.itemList=h;var r="";if(o.$untouched){r=i(o.$modelValue)}o.$setViewValue(r);o.$render();if(!r){g[0].value=""}},true);p.listObj={listShown:null};o.$parsers.push(function(s){var r="";s=s||"";p.itemList=d("filter")(h,s);angular.forEach(h,function(u){switch(q){case"object":var t=Object.prototype.toString.call(s);if(t==="[object Object]"){if(u[p.itemdesc].toLowerCase()===s[p.itemdesc].toLowerCase()){r=u}}break;case"value":if(u[p.itemdesc].toLowerCase()===s.toLowerCase()){r=u[k]}break}});return r});o.$formatters.push(function(s){var r="";s=s||"";if(!s){p.itemList=d("filter")(h,s)}angular.forEach(h,function(t){switch(q){case"object":if(t[k].toLowerCase()==s[k].toLowerCase()){r=t[p.itemdesc]}break;case"value":if(t[k].toLowerCase()==s.toLowerCase()){r=t[p.itemdesc]}break}});return r});p.itemClick=function(r){if(r[k]){switch(q){case"object":o.$setViewValue(r);o.$render();break;case"value":o.$setViewValue(r[p.itemdesc]);o.$render();break}}else{o.$setViewValue("");o.$render()}g[0].value=r[p.itemdesc]};p.adjustPosition=function(){var z=window.innerWidth||document.documentElement.clientWidth,v=window.innerHeight||document.documentElement.clientHeight,s=window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop,u,r,y,x=g[0].offsetWidth,t=g[0].clientHeight,w=document.getElementsByClassName("searchListBox")[0].clientHeight;if(typeof g[0].getBoundingClientRect==="function"){r=g[0].getBoundingClientRect();u=r.left+window.pageXOffset;y=r.bottom+window.pageYOffset;if(u+x>z){u=u-x}if(y+w>v){y=y-w-t}}f.top=y+"px";f.left=u+"px";f.width=x+"px";return f};p.getBrightness=function(t){var v=parseInt(t.substr(0,2),16);var u=parseInt(t.substr(2,2),16);var s=parseInt(t.substr(4,2),16);var w=((v*299)+(u*587)+(s*114))/1000;return(w>=128)?"black":"white"};p.getHoverStyle=function(){var r={};r.color=p.getBrightness(p.themeColor);r.background="#"+p.themeColor;return r};g.on("focus",function(){p.listObj.listShown=true;o.$setViewValue("");o.$render();g[0].value="";p.$apply()});g.on("blur",function(){p.listObj.listShown=false;p.$apply()})}}}]);dmCommonApi.directive("dmFormatDate",["$filter",function(a){return{restrict:"A",require:"?ngModel",link:function(d,c,b,e){e.$parsers.push(function(h){var f="";if(h){var g=a("parseServerDate")(h);if(!isNaN(g)){c[0].value=g.parseDate("shortdate");h=a("parseServerDate")(h);f=h.parseDate("serverdate")}else{c[0].value=""}}return f});e.$formatters.push(function(g){var f="";if(g){g=a("parseServerDate")(g);f=g.parseDate("shortdate")}return f})}}}]);dmCommonApi.directive("tickerElement",["$parse","$sce",function(c,a){var d={};d.templateUrl="commonFilters/ticker.html";d.scope={};function b(g,f,e){g.dataString="";var h=c(e.messageString);g.$watch(function(){return h(f.scope())},function(i){g.dataString=a.trustAsHtml(i)})}d.link=b;return d}]);dmCommonApi.directive("webOnForm",[function(){var c={};c.scope={};c.templateUrl="commonFilters/webOnTemplate.html";function a(d){}function b(f,e,d){f.dataObj={};f.formParameters=[]}c.controller=a;c.link=b;return c}]);dmCommonApi.filter("checkvaluetype",function(){return function(b){var a="";if(angular.isArray(b)){if(b.length==1){if(b[0].hasOwnProperty("crn")){a=b[0]["crn"]}else{a=b.length}}else{a=b.length}return a}else{return b}}});dmCommonApi.directive("onlyDigits",function(){return{restrict:"A",require:"?ngModel",link:function(d,b,a,c){c.$parsers.push(function(f){if(f==undefined){return""}var e=a.onlyDigits||"nothing";var j=/[^0-9]/g;switch(e){case"decimal":j=/[^0-9.]/g;var g=f.replace(j,"");if(g.indexOf(".")>-1){var h=g.split(".")[1];var i=g.split(".")[0];if(h.length>2){h=h.substr(0,2)}g=i+"."+h}break;default:var g=f.replace(j,"");break}if(g=="0"){g=""}if(g!==f){c.$setViewValue(g);c.$render()}return g})}}});dmCommonApi.directive("myEnter",function(){return function(c,b,a){b.bind("keydown keypress",function(d){if(d.which===13){c.$apply(function(){c.$eval(a.myEnter)});d.preventDefault()}})}});
self.onmessage=function(t){var w=t.data.key1;var j=t.data.key2;var n=j.split(",");var f=t.data.key3;var o=t.data.key4;var g=[];var q=[];var l=0;var m=0;var c=20000;var u={};var d=1;for(var s=0,k=w.length;s<k;s++){g=[];for(var v=0,r=o.length;v<r;v++){w[s][f[v]]=w[s][f[v].toLowerCase()].replace(/[â€'"]/g,"");switch(o[v]["datatype"].toLowerCase()){case"number":if(w[s][f[v]]!==""){if(w[s][f[v]].split(",").length>1){w[s][f[v]]=(w[s][f[v]].split(",").join(""));g.push(w[s][f[v]])}else{g.push(w[s][f[v]])}}else{g.push("'"+w[s][f[v]]+"'")}break;case"varchar2":case"string":case"boolean":g.push("'"+w[s][f[v]]+"'");break;default:g.push("'"+w[s][f[v]]+"'");break}}var p=g.join(",");l+=p.length;if(l>c){l=0;var h=q;var b=h.join("~");u[d]=b;d++;q=[]}m+=p.length;q.push(p)}if(l<=c){l=0;var h=q;var b=h.join("~");u[d]=b;d++;q=[]}postMessage({type:"submitData",data:u})};